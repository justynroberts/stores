- defaultTab: nodes
  description: 'Contr√¥le automatique des dates limites, gestion des produits en fin
    de vie et actions anti-gaspillage'
  executionEnabled: true
  group: Retail
  id: 21c0a70e-6a5f-4dc8-bfd5-42777b3628ce
  loglevel: INFO
  name: Gestion Fra√Æcheur et DLC Automatique
  nodeFilterEditable: true
  notification:
    onfailure:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
    onstart:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
    onsuccess:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
  notifyAvgDurationThreshold: null
  plugins:
    ExecutionLifecycle: null
  schedule:
    dayofmonth:
      day: '*'
    month: '*'
    time:
      hour: '19'
      minute: '30'
      seconds: '0'
    year: '*'
  scheduleEnabled: true
  schedules: []
  sequence:
    commands:
    - interpreterArgsQuoted: false
      script: |-
        #!/bin/bash

        echo "========================================"
        echo "ü•ó GESTION FRA√éCHEUR ET DLC AUTOMATIQUE"
        echo "========================================"
        echo "Contr√¥le quotidien du $(date +'%d/%m/%Y')"
        echo ""

        # Scan des produits
        echo "[$(date +%H:%M:%S)] Scan des codes-barres et DLC..."
        echo "üìä ANALYSE DES DATES LIMITES"
        echo "============================="
        sleep 2
        echo "Produits scann√©s: 12,847"
        echo "Technologies: RFID + Codes-barres + IA"
        echo ""

        # Produits critiques J+1
        echo "üî¥ P√âREMPTION DEMAIN (J+1)"
        echo "==========================="
        sleep 2
        echo "ACTIONS IMM√âDIATES:"
        echo "‚Ä¢ 24x Yaourts nature ‚Üí -50% d√®s ouverture"
        echo "‚Ä¢ 18x Salades compos√©es ‚Üí -60% + sticker"
        echo "‚Ä¢ 12x Sandwichs club ‚Üí Too Good To Go"
        echo "‚Ä¢ 8x Plats cuisin√©s ‚Üí Don association 18h"
        echo "Total valeur: ‚Ç¨186.40"
        echo ""

        # Produits J+2 et J+3
        echo "üü° P√âREMPTION J+2 √† J+3"
        echo "========================"
        sleep 2
        echo "√Ä SURVEILLER:"
        echo "‚Ä¢ 156x Produits laitiers ‚Üí Mise en avant"
        echo "‚Ä¢ 89x Viandes fra√Æches ‚Üí Promotion -30%"
        echo "‚Ä¢ 67x P√¢tisseries ‚Üí Rotation FIFO stricte"
        echo "‚Ä¢ 45x Fruits coup√©s ‚Üí D√©gustation gratuite"
        echo ""

        # Optimisation anti-gaspi
        echo "[$(date +%H:%M:%S)] Activation strat√©gies anti-gaspillage..."
        echo "‚ôªÔ∏è ACTIONS ANTI-GASPILLAGE"
        echo "==========================="
        sleep 3
        echo "1. TRANSFORMATION PRODUITS:"
        echo "   ‚Ä¢ Bananes trop m√ªres ‚Üí Smoothies bar (32kg)"
        echo "   ‚Ä¢ L√©gumes d√©fra√Æchis ‚Üí Soupes maison (28kg)"
        echo "   ‚Ä¢ Pain de la veille ‚Üí Chapelure/cro√ªtons (15kg)"
        echo ""
        echo "2. PROMOTIONS DYNAMIQUES:"
        echo "   ‚Ä¢ 17h00: -20% produits J+3"
        echo "   ‚Ä¢ 19h00: -40% produits J+2"
        echo "   ‚Ä¢ 20h30: -60% derni√®re chance"
        echo ""
        echo "3. PARTENARIATS:"
        echo "   ‚Ä¢ Too Good To Go: 25 paniers pr√©par√©s"
        echo "   ‚Ä¢ Restos du C≈ìur: Collecte 18h30"
        echo "   ‚Ä¢ Compost local: Bac rempli √† 60%"
        echo ""

        # Alertes automatiques
        echo "[$(date +%H:%M:%S)] Envoi des alertes aux responsables..."
        echo "üì± NOTIFICATIONS ENVOY√âES"
        echo "========================="
        sleep 2
        echo "‚úì Chef rayon frais: Liste produits J+1"
        echo "‚úì Responsable promo: √âtiquettes √† imprimer"
        echo "‚úì Too Good To Go: Paniers disponibles"
        echo "‚úì Associations: Horaire de collecte"
        echo ""

        # Statistiques et KPI
        echo "[$(date +%H:%M:%S)] Calcul des indicateurs..."
        echo "üìà PERFORMANCE FRA√éCHEUR"
        echo "========================"
        sleep 2
        echo "Taux de casse: 1.8% (objectif: <2%) ‚úÖ"
        echo "Valorisation d√©chets: 84% (‚Üë +6%)"
        echo "√âconomie r√©alis√©e: ‚Ç¨2,847 ce mois"
        echo "Score fra√Æcheur client: 4.6/5 ‚≠ê"
        echo "CO‚ÇÇ √©vit√©: 347 kg"
        echo ""

        # Commandes ajust√©es
        echo "[$(date +%H:%M:%S)] Ajustement des commandes..."
        echo "üéØ OPTIMISATION COMMANDES"
        echo "========================="
        sleep 1
        echo "R√©duction automatique appliqu√©e:"
        echo "‚Ä¢ Yaourts: -15% (surstock d√©tect√©)"
        echo "‚Ä¢ Salades: -20% (m√©t√©o d√©favorable)"
        echo "‚Ä¢ Fruits exotiques: -10% (rotation lente)"
        echo ""
        echo "‚úÖ Gestion fra√Æcheur optimis√©e - Z√©ro gaspillage en vue!"
      scriptInterpreter: bash
    keepgoing: true
    strategy: node-first
  uuid: 21c0a70e-6a5f-4dc8-bfd5-42777b3628ce

