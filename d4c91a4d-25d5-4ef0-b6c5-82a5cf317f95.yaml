- defaultTab: nodes
  description: 'Synchronise les donn√©es entre le si√®ge et tous les magasins, √©quilibre
    les stocks inter-magasins'
  executionEnabled: true
  group: Retail
  id: d4c91a4d-25d5-4ef0-b6c5-82a5cf317f95
  loglevel: INFO
  name: Synchronisation Multi-Magasins
  nodeFilterEditable: true
  notification:
    onfailure:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
    onstart:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
    onsuccess:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
  notifyAvgDurationThreshold: null
  plugins:
    ExecutionLifecycle: null
  schedule:
    dayofmonth:
      day: '*'
    month: '*'
    time:
      hour: '02'
      minute: '00'
      seconds: '0'
    year: '*'
  scheduleEnabled: true
  schedules: []
  sequence:
    commands:
    - interpreterArgsQuoted: false
      script: |-
        #!/bin/bash

        echo "========================================"
        echo "üîÑ SYNCHRONISATION MULTI-MAGASINS"
        echo "========================================"
        echo "Lancement de la synchronisation √† $(date)"
        echo ""

        # Connexion aux magasins
        echo "[$(date +%H:%M:%S)] √âtablissement des connexions..."
        echo "üì° CONNEXION AUX SITES"
        echo "====================="
        sleep 1
        echo "[$(date +%H:%M:%S)] üü¢ Si√®ge HQ: Connect√© (Latence: 2ms)"
        sleep 1
        echo "[$(date +%H:%M:%S)] üü¢ Store 0: Connect√© (Latence: 15ms)"
        sleep 1
        echo "[$(date +%H:%M:%S)] üü¢ Store 1: Connect√© (Latence: 18ms)"
        echo ""

        # Collecte des donn√©es
        echo "[$(date +%H:%M:%S)] Collecte des donn√©es des magasins..."
        echo "üìä COLLECTE DES DONN√âES"
        echo "======================="
        sleep 2
        echo "Store 0: 1,247 transactions, CA: ‚Ç¨28,450"
        echo "Store 1: 982 transactions, CA: ‚Ç¨22,130"
        echo "Total r√©seau: 2,229 transactions, CA: ‚Ç¨50,580"
        echo ""

        # Analyse des d√©s√©quilibres
        echo "[$(date +%H:%M:%S)] Analyse des stocks inter-magasins..."
        echo "‚öñÔ∏è D√âS√âQUILIBRES D√âTECT√âS"
        echo "========================="
        sleep 2
        echo "üî¥ Store 0 - SURSTOCK:"
        echo "   - Shampooing L'Or√©al: +234 unit√©s"
        echo "   - Caf√© moulu 250g: +156 unit√©s"
        echo "   - Papier toilette x12: +89 unit√©s"
        echo ""
        echo "üü° Store 1 - RUPTURE IMMINENTE:"
        echo "   - Shampooing L'Or√©al: 12 unit√©s (3 jours)"
        echo "   - Caf√© moulu 250g: 8 unit√©s (2 jours)"
        echo "   - Lessive liquide 3L: 15 unit√©s (4 jours)"
        echo ""

        # Transferts propos√©s
        echo "[$(date +%H:%M:%S)] Calcul des transferts optimaux..."
        echo "üöö TRANSFERTS INTER-MAGASINS PLANIFI√âS"
        echo "======================================"
        sleep 3
        echo "Demain 7h00 - Camion #CF-LOG-01:"
        echo "  Store 0 ‚Üí Store 1:"
        echo "  ‚Ä¢ 50 unit√©s Shampooing L'Or√©al"
        echo "  ‚Ä¢ 40 unit√©s Caf√© moulu 250g"
        echo "  ‚Ä¢ 30 unit√©s Papier toilette x12"
        echo "  Distance: 12km, Dur√©e: 25min"
        echo ""

        # Synchronisation prix/promos
        echo "[$(date +%H:%M:%S)] Mise √† jour des prix et promotions..."
        echo "üí∞ SYNCHRONISATION TARIFAIRE"
        echo "============================"
        sleep 2
        echo "‚úì 127 prix mis √† jour"
        echo "‚úì 18 nouvelles promotions activ√©es"
        echo "‚úì 5 promotions expir√©es d√©sactiv√©es"
        echo "‚úì √âtiquettes √©lectroniques: Mise √† jour programm√©e 6h00"
        echo ""

        # Performance r√©seau
        echo "[$(date +%H:%M:%S)] Analyse performance du r√©seau..."
        echo "üìà PERFORMANCE COMPARATIVE"
        echo "=========================="
        sleep 2
        echo "Meilleure performance: Store 0 (+15% vs objectif)"
        echo "√Ä am√©liorer: Store 1 (Rayon frais -8%)"
        echo "Produit star du jour: Pizza Margherita (+234%)"
        echo "Cat√©gorie en croissance: Bio (+18% sur 7 jours)"
        echo ""

        # Backup et r√©plication
        echo "[$(date +%H:%M:%S)] Sauvegarde des donn√©es..."
        sleep 2
        echo "[$(date +%H:%M:%S)] ‚úì Backup Store 0: Complete"
        echo "[$(date +%H:%M:%S)] ‚úì Backup Store 1: Complete"
        echo "[$(date +%H:%M:%S)] ‚úì R√©plication base centrale: OK"
        echo "[$(date +%H:%M:%S)] ‚úì Synchronisation cloud: Termin√©e"
        echo ""
        echo "‚úÖ Synchronisation multi-magasins r√©ussie!"
      scriptInterpreter: bash
    keepgoing: false
    strategy: node-first
  uuid: d4c91a4d-25d5-4ef0-b6c5-82a5cf317f95

