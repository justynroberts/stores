- defaultTab: nodes
  description: G√©n√®re les rapports de ventes de fin de journ√©e pour tous les magasins
  executionEnabled: true
  group: Retail
  id: 039e5faa-f79c-4c6e-8b52-e8ef356f34aa
  loglevel: INFO
  name: Rapport de Ventes Quotidien
  nodeFilterEditable: true
  notification:
    onfailure:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
    onstart:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
    onsuccess:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
  notifyAvgDurationThreshold: null
  plugins:
    ExecutionLifecycle: null
  schedule:
    dayofmonth:
      day: '*'
    month: '*'
    time:
      hour: '22'
      minute: '00'
      seconds: '0'
    year: '*'
  scheduleEnabled: false
  schedules: []
  sequence:
    commands:
    - interpreterArgsQuoted: false
      script: |-
        #!/bin/bash

        echo "========================================"
        echo "G√âN√âRATEUR DE RAPPORT DE VENTES QUOTIDIEN"
        echo "========================================"
        echo "D√©but de la g√©n√©ration du rapport √† $(date)"
        echo ""

        # Connexion aux syst√®mes de caisse
        echo "[$(date +%H:%M:%S)] Connexion aux syst√®mes de caisse..."
        sleep 2
        echo "[$(date +%H:%M:%S)] ‚úì Connect√© √† la caisse du Magasin 0"
        sleep 1
        echo "[$(date +%H:%M:%S)] ‚úì Connect√© √† la caisse du Magasin 1"
        echo ""

        # Collecte des donn√©es
        echo "[$(date +%H:%M:%S)] Collecte des donn√©es de ventes..."
        sleep 3
        echo "[$(date +%H:%M:%S)] - Magasin 0: Traitement de 1,247 transactions"
        sleep 2
        echo "[$(date +%H:%M:%S)] - Magasin 1: Traitement de 982 transactions"
        echo ""

        # G√©n√©ration des chiffres de ventes
        STORE0_SALES=$((20000 + RANDOM % 10000))
        STORE1_SALES=$((15000 + RANDOM % 8000))
        TOTAL_SALES=$((STORE0_SALES + STORE1_SALES))

        echo "[$(date +%H:%M:%S)] Calcul des totaux..."
        sleep 2
        echo ""
        echo "üìä R√âSUM√â DES VENTES DU JOUR"
        echo "================================"
        echo "Magasin 0: ‚Ç¨$(printf "%'d" $STORE0_SALES)"
        echo "Magasin 1: ‚Ç¨$(printf "%'d" $STORE1_SALES)"
        echo "--------------------------------"
        echo "TOTAL:     ‚Ç¨$(printf "%'d" $TOTAL_SALES)"
        echo ""

        # G√©n√©ration du rapport
        echo "[$(date +%H:%M:%S)] G√©n√©ration du rapport PDF..."
        sleep 3
        echo "[$(date +%H:%M:%S)] ‚úì Rapport g√©n√©r√©: rapport_ventes_$(date +%Y%m%d).pdf"
        echo ""
        echo "[$(date +%H:%M:%S)] Envoi du rapport par email..."
        sleep 2
        echo "[$(date +%H:%M:%S)] ‚úì Email envoy√© √† direction@carrefour.fr"
        echo ""
        echo "‚úÖ Rapport de ventes quotidien termin√© avec succ√®s!"
      scriptInterpreter: bash
    keepgoing: false
    strategy: node-first
  uuid: 039e5faa-f79c-4c6e-8b52-e8ef356f34aa

