- defaultTab: nodes
  description: V√©rifie les niveaux de stock et g√©n√®re les commandes de r√©approvisionnement
    automatiques
  executionEnabled: true
  group: Retail
  id: 2949f6b2-9ac7-4eb8-9dfa-e17a1a69aeaa
  loglevel: INFO
  name: Contr√¥le des Stocks Automatique
  nodeFilterEditable: true
  notification:
    onfailure:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
    onstart:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
    onsuccess:
      format: json
      httpMethod: post
      urls: http://172.31.46.107:9200/carrefour/_doc/
  notifyAvgDurationThreshold: null
  options:
  - description: Pourcentage du seuil pour niveau bas
    name: seuil_bas
    type: Integer
    value: '30'
  - description: Pourcentage du seuil pour niveau critique
    name: seuil_critique
    type: Integer
    value: '10'
  plugins:
    ExecutionLifecycle: null
  schedule:
    dayofmonth:
      day: '*'
    month: '*'
    time:
      hour: '21'
      minute: '00'
      seconds: '0'
    year: '*'
  scheduleEnabled: true
  schedules: []
  sequence:
    commands:
    - interpreterArgsQuoted: false
      script: |-
        #!/bin/bash

        echo "========================================"
        echo "CONTR√îLE AUTOMATIQUE DES STOCKS"
        echo "========================================"
        echo "Lancement du contr√¥le √† $(date)"
        echo ""

        # Connexion √† l'inventaire
        echo "[$(date +%H:%M:%S)] Connexion au syst√®me d'inventaire..."
        sleep 2
        echo "[$(date +%H:%M:%S)] ‚úì Connect√© √† l'ERP Carrefour"
        echo ""

        # Analyse des stocks
        echo "[$(date +%H:%M:%S)] Analyse des niveaux de stock..."
        echo ""

        # Produits critiques
        echo "üî¥ STOCKS CRITIQUES (< 10% du seuil)"
        echo "====================================="
        sleep 2
        echo "- Lait demi-√©cr√©m√© 1L: 12 unit√©s (seuil: 200)"
        echo "- Pain baguette tradition: 8 unit√©s (seuil: 150)"
        echo "- Eau Evian 1.5L pack x6: 5 unit√©s (seuil: 100)"
        echo ""

        # Produits bas
        echo "üü° STOCKS BAS (< 30% du seuil)"
        echo "=============================="
        sleep 2
        echo "- Yaourt nature x4: 45 unit√©s (seuil: 200)"
        echo "- Pommes Golden kg: 38 unit√©s (seuil: 150)"
        echo "- P√¢tes Barilla 500g: 62 unit√©s (seuil: 250)"
        echo "- Sucre blanc 1kg: 28 unit√©s (seuil: 100)"
        echo ""

        # G√©n√©ration des commandes
        echo "[$(date +%H:%M:%S)] G√©n√©ration des commandes automatiques..."
        sleep 3
        echo ""
        echo "üì¶ COMMANDES G√âN√âR√âES"
        echo "====================="
        echo "Commande #CF$(date +%Y%m%d)-001 - Produits laitiers"
        echo "Commande #CF$(date +%Y%m%d)-002 - Boulangerie"
        echo "Commande #CF$(date +%Y%m%d)-003 - Boissons"
        echo "Commande #CF$(date +%Y%m%d)-004 - √âpicerie"
        echo ""

        # Optimisation des rayons
        echo "[$(date +%H:%M:%S)] Analyse de l'optimisation des rayons..."
        sleep 2
        echo "[$(date +%H:%M:%S)] üí° Recommandation: R√©organiser rayon fruits/l√©gumes"
        echo "[$(date +%H:%M:%S)] üí° Recommandation: Augmenter stock produits bio"
        echo ""

        # Envoi aux fournisseurs
        echo "[$(date +%H:%M:%S)] Transmission des commandes..."
        sleep 2
        echo "[$(date +%H:%M:%S)] ‚úì 4 commandes envoy√©es aux fournisseurs"
        echo "[$(date +%H:%M:%S)] ‚úì Confirmation de livraison: Demain 6h00"
        echo ""
        echo "‚úÖ Contr√¥le des stocks termin√© - $(date +%H:%M:%S)"
      scriptInterpreter: bash
    keepgoing: false
    strategy: node-first
  uuid: 2949f6b2-9ac7-4eb8-9dfa-e17a1a69aeaa

